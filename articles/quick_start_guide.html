<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick start guide • delma</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Quick start guide">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">delma</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/quick_start_guide.html">Quick start guide</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AtlasOfLivingAustralia/delma/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Quick start guide</h1>
                        <h4 data-toc-skip class="author">Martin
Westgate</h4>
            
            <h4 data-toc-skip class="date">2025-04-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/AtlasOfLivingAustralia/delma/blob/v0.1.1/vignettes/quick_start_guide.Rmd" class="external-link"><code>vignettes/quick_start_guide.Rmd</code></a></small>
      <div class="d-none name"><code>quick_start_guide.Rmd</code></div>
    </div>

    
    
<p>Ecological Metadata Language (EML) is a “comprehensive vocabulary and
a readable XML markup syntax for documenting research data” (<a href="https://doi.org/10.5063/F11834T2" class="external-link">Jones et al. 2019</a>).
Supplying metadata in this format is a requirement of several
data-sharing institutions, notably including the Global Biodiversity
Information Facility (<a href="https://gbif.org" class="external-link">GBIF</a>) and its
partner nodes. While the <a href="https://cran.r-project.org/package=EML" class="external-link">EML package</a> already
exists to support building and manipulating EML within the workspace,
there is no comparable system for writing these documents in a more
human-readable format, such as R Markdown or Quarto markdown.
<code>delma</code> provides this capability.</p>
<p>The default method for using <code>delma</code> is to:</p>
<ol style="list-style-type: decimal">
<li>Create a metadata statement template with
<code><a href="../reference/use_metadata_template.html">use_metadata_template()</a></code>
</li>
<li>Edit metadata in your chosen IDE</li>
<li>Read the data into R with <code><a href="../reference/read_md.html">read_md()</a></code>
</li>
<li>Write the data to an EML file with <code><a href="../reference/write_eml.html">write_eml()</a></code>
</li>
</ol>
<p>EML is quite stringent in the types of data that are allowed, as well
as their order and placement in the hierarchy. Getting these points
right can be challenging, and we suggest using
<code><a href="../reference/check_metadata.html">check_metadata()</a></code> in combination with the <a href="https://eml.ecoinformatics.org" class="external-link">EML schema documentation</a> to
get it right.</p>
<div class="section level2">
<h2 id="formatting-your-metadata-statement">Formatting your metadata statement<a class="anchor" aria-label="anchor" href="#formatting-your-metadata-statement"></a>
</h2>
<p>There are several points that are unusual about Rmarkdown documents
formatted using <code>delma</code>, which we discuss below</p>
<div class="section level3">
<h3 id="document-structure">Document structure<a class="anchor" aria-label="anchor" href="#document-structure"></a>
</h3>
<p>Create a metadata statement template using
<code><a href="../reference/use_metadata_template.html">use_metadata_template()</a></code></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/use_metadata_template.html">use_metadata_template</a></span><span class="op">(</span><span class="st">"my-metadata-statement.Rmd"</span><span class="op">)</span></span></code></pre></div>
<p>Header levels in markdown-formatted metadata statements determine the
nested structure of the resulting xml. For example, this text in
markdown…</p>
<pre><code># EML

## Dataset

### Title
My title
</code></pre>
<p>…parses to this in xml.</p>
<pre><code>&lt;EML&gt;
  &lt;dataset&gt;
    &lt;title&gt;My title&lt;/title&gt;
  &lt;/dataset&gt;
&lt;EML&gt;</code></pre>
</div>
<div class="section level3">
<h3 id="attributes">Attributes<a class="anchor" aria-label="anchor" href="#attributes"></a>
</h3>
<p>Attributes can be added to a particular EML tag by including them in
a <code>list</code> within a code block, the <code>label</code> of which
is used by <code>delma</code> to link tags to their attributes. To add
attributes to the <code>userId</code> field, for example, you would add
the following code under the <code>## userId</code> heading:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="in">#| label: 'userId'</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="in">#| include: false</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="in">list(directory = "https://orcid.org")</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>The <code>include: false</code> tag is added so that this content
isn’t displayed when the document is knit.</p>
</div>
<div class="section level3">
<h3 id="setting-a-unique-id">Setting a unique ID<a class="anchor" aria-label="anchor" href="#setting-a-unique-id"></a>
</h3>
<p>Every EML document must open with the tag <code>eml</code>, and the
attributes of that element <strong>must</strong> contain a unique
identifier in the <code>packageId</code> field, as well as a link to the
system within which that key is unique. A logical example might be a
DOI:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="in">#| label: 'eml'</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="in">#| include: false</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="in">list(packageId = "https://doi.org/10.32614/CRAN.package.galah",</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="in">     system = "https://doi.org")</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>A valid alternative might be a GitHub release:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="in">#| label: 'eml'</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="in">#| include: false</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="in">list(packageId = "https://github.com/AtlasOfLivingAustralia/galah-R/releases/download/v2.1.0/galah_2.1.0.tar.gz",</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="in">     system = "https://github.com")</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>Note that the <code>eml</code> tag is unusual in <code>delma</code>
in that it is added automatically if not supplied. Where this occurs,
all tag levels are also incremented by one to account for this
change.</p>
</div>
<div class="section level3">
<h3 id="dynamic-content">Dynamic content<a class="anchor" aria-label="anchor" href="#dynamic-content"></a>
</h3>
<p><code>delma</code> will call <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render()</a></code>
internally whenever <code><a href="../reference/read_md.html">read_md()</a></code> or
<code>render_metadata()</code> is used, meaning that it is possible to
add dynamic content to your metadata statements. The boilerplate
statement that ships with delma uses this feature to automatically
populate the <code>Title</code> and <code>Pubdate</code> fields from the
<code>YAML</code> section, for example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="in">#| echo: false</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="in">#| results: 'asis'</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="in"># NOTE: This is set using the yaml above; do not edit by hand</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="in">cat(rmarkdown::metadata$date)</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>You could also implement dynamic content using inline code. For
example:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>This data contains <span class="st">`</span><span class="at">r readr::read_csv("my_data.csv") |&gt; nrow()</span><span class="st">`</span> rows.</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="reading-writing-and-format-conversion">Reading, writing, and format conversion<a class="anchor" aria-label="anchor" href="#reading-writing-and-format-conversion"></a>
</h2>
<p>Internally, <code>delma</code> uses the <a href="https://cran.r-project.org/package=lightparser" class="external-link">lightparser</a>
package to convert markdown files to <code>tibble</code>s, and the <a href="https://cran.r-project.org/package=xml2" class="external-link">xml2</a> package to
convert <code>list</code>s to xml and write them to file. Between these
two packages, we have written functions to convert between tibble and
list versions of EML-formatted markdown.</p>
<p>Under the hood, <code><a href="../reference/read_md.html">read_md()</a></code>, which does a few things:</p>
<ul>
<li>calls <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render()</a></code> on your chosen file, meaning
any code blocks or inline code is executed properly.</li>
<li>appends code blocks whose <code>label</code> matches an EML tag to
the <code>attributes</code> of that EML tag; this allows quite complex
attribute addition without affecting rendered text.</li>
<li>‘cleans’ the imported tibble to a small number of required
columns.</li>
</ul>
<p>This tibble can then be rendered to EML using
<code><a href="../reference/write_eml.html">write_eml()</a></code>. The inverse operation is accomplished by
calling <code><a href="../reference/read_eml.html">read_eml()</a></code> followed by <code><a href="../reference/write_md.html">write_md()</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Westgate, Shandiya Balasubramaniam, Dax Kellie.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
